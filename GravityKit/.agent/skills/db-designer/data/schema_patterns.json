{
    "schema_patterns": {
        "users_auth": {
            "description": "User authentication with roles and sessions",
            "tables": {
                "users": {
                    "id": "UUID PRIMARY KEY DEFAULT gen_random_uuid()",
                    "email": "VARCHAR(255) UNIQUE NOT NULL",
                    "password_hash": "VARCHAR(255) NOT NULL",
                    "name": "VARCHAR(100)",
                    "avatar_url": "TEXT",
                    "role": "ENUM('user','admin','moderator') DEFAULT 'user'",
                    "email_verified_at": "TIMESTAMP",
                    "created_at": "TIMESTAMP DEFAULT NOW()",
                    "updated_at": "TIMESTAMP DEFAULT NOW()"
                },
                "sessions": {
                    "id": "UUID PRIMARY KEY",
                    "user_id": "UUID REFERENCES users(id) ON DELETE CASCADE",
                    "token_hash": "VARCHAR(255) UNIQUE NOT NULL",
                    "ip_address": "INET",
                    "user_agent": "TEXT",
                    "expires_at": "TIMESTAMP NOT NULL",
                    "created_at": "TIMESTAMP DEFAULT NOW()"
                }
            }
        },
        "multi_tenant_saas": {
            "description": "Multi-tenant SaaS with organizations and memberships",
            "tables": {
                "organizations": {
                    "id": "UUID PRIMARY KEY",
                    "name": "VARCHAR(100) NOT NULL",
                    "slug": "VARCHAR(100) UNIQUE NOT NULL",
                    "plan": "ENUM('free','pro','enterprise') DEFAULT 'free'",
                    "created_at": "TIMESTAMP DEFAULT NOW()"
                },
                "memberships": {
                    "id": "UUID PRIMARY KEY",
                    "user_id": "UUID REFERENCES users(id)",
                    "organization_id": "UUID REFERENCES organizations(id)",
                    "role": "ENUM('owner','admin','member','viewer')",
                    "invited_at": "TIMESTAMP",
                    "joined_at": "TIMESTAMP"
                }
            }
        },
        "e_commerce": {
            "description": "E-commerce with products, orders, and payments",
            "tables": {
                "products": {
                    "id": "UUID PRIMARY KEY",
                    "name": "VARCHAR(200) NOT NULL",
                    "slug": "VARCHAR(200) UNIQUE NOT NULL",
                    "description": "TEXT",
                    "price": "DECIMAL(10,2) NOT NULL",
                    "compare_at_price": "DECIMAL(10,2)",
                    "sku": "VARCHAR(50) UNIQUE",
                    "stock": "INTEGER DEFAULT 0",
                    "category_id": "UUID REFERENCES categories(id)",
                    "status": "ENUM('draft','active','archived') DEFAULT 'draft'",
                    "images": "JSONB DEFAULT '[]'"
                },
                "orders": {
                    "id": "UUID PRIMARY KEY",
                    "user_id": "UUID REFERENCES users(id)",
                    "status": "ENUM('pending','paid','shipped','delivered','cancelled')",
                    "subtotal": "DECIMAL(10,2)",
                    "tax": "DECIMAL(10,2)",
                    "shipping": "DECIMAL(10,2)",
                    "total": "DECIMAL(10,2)",
                    "shipping_address": "JSONB",
                    "created_at": "TIMESTAMP DEFAULT NOW()"
                },
                "order_items": {
                    "id": "UUID PRIMARY KEY",
                    "order_id": "UUID REFERENCES orders(id) ON DELETE CASCADE",
                    "product_id": "UUID REFERENCES products(id)",
                    "quantity": "INTEGER NOT NULL",
                    "unit_price": "DECIMAL(10,2) NOT NULL"
                }
            }
        },
        "content_management": {
            "description": "CMS with posts, categories, tags, and comments",
            "tables": {
                "posts": {
                    "id": "UUID PRIMARY KEY",
                    "author_id": "UUID REFERENCES users(id)",
                    "title": "VARCHAR(200) NOT NULL",
                    "slug": "VARCHAR(200) UNIQUE NOT NULL",
                    "content": "TEXT",
                    "excerpt": "TEXT",
                    "featured_image": "TEXT",
                    "status": "ENUM('draft','published','archived') DEFAULT 'draft'",
                    "published_at": "TIMESTAMP",
                    "created_at": "TIMESTAMP DEFAULT NOW()"
                },
                "categories": {
                    "id": "UUID PRIMARY KEY",
                    "name": "VARCHAR(100) NOT NULL",
                    "slug": "VARCHAR(100) UNIQUE NOT NULL",
                    "parent_id": "UUID REFERENCES categories(id)"
                },
                "tags": {
                    "id": "UUID PRIMARY KEY",
                    "name": "VARCHAR(50) UNIQUE NOT NULL"
                },
                "post_tags": {
                    "post_id": "UUID REFERENCES posts(id) ON DELETE CASCADE",
                    "tag_id": "UUID REFERENCES tags(id) ON DELETE CASCADE",
                    "PRIMARY_KEY": "(post_id, tag_id)"
                }
            }
        },
        "subscription_billing": {
            "description": "Subscription billing with plans, subscriptions, invoices",
            "tables": {
                "plans": {
                    "id": "UUID PRIMARY KEY",
                    "name": "VARCHAR(100) NOT NULL",
                    "slug": "VARCHAR(100) UNIQUE",
                    "price_monthly": "DECIMAL(10,2)",
                    "price_yearly": "DECIMAL(10,2)",
                    "features": "JSONB DEFAULT '{}'",
                    "limits": "JSONB DEFAULT '{}'"
                },
                "subscriptions": {
                    "id": "UUID PRIMARY KEY",
                    "user_id": "UUID REFERENCES users(id)",
                    "plan_id": "UUID REFERENCES plans(id)",
                    "status": "ENUM('trialing','active','past_due','cancelled','expired')",
                    "current_period_start": "TIMESTAMP",
                    "current_period_end": "TIMESTAMP",
                    "cancel_at_period_end": "BOOLEAN DEFAULT false"
                },
                "invoices": {
                    "id": "UUID PRIMARY KEY",
                    "subscription_id": "UUID REFERENCES subscriptions(id)",
                    "amount": "DECIMAL(10,2)",
                    "status": "ENUM('draft','open','paid','void')",
                    "due_date": "TIMESTAMP",
                    "paid_at": "TIMESTAMP"
                }
            }
        }
    },
    "indexing_best_practices": [
        "Always index foreign keys",
        "Index columns used in WHERE, ORDER BY, GROUP BY",
        "Use composite indexes for multi-column queries (most selective first)",
        "Avoid indexing low-cardinality columns alone",
        "Use partial indexes for filtered queries (WHERE status = 'active')",
        "Consider GIN indexes for JSONB columns"
    ]
}